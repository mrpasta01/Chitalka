package com.example.myapplication;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.FrameLayout;
import android.widget.RadioButton;
import android.widget.RadioGroup;
import android.widget.Toast;
import android.widget.TextView;
import androidx.appcompat.app.AppCompatActivity;
import android.animation.AnimatorSet;
import android.animation.ObjectAnimator;
import androidx.core.content.res.ResourcesCompat;
import android.graphics.Typeface;
public class MainActivity1 extends AppCompatActivity {
    private static final int REQUEST_CODE_OPEN_DOCUMENT = 1;
    Button firstBook, MenuTurnOnButton, OutSettingsButton, OutSoderzButton, InSettingsButton, InSoderzButton;
    FrameLayout File, Menu, Settings, Soderz;
    RadioButton radioarimo, radiomonomakh, radiooswald;
    TextView textView;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Инициализация кнопок и фреймов
        firstBook = findViewById(R.id.firstBook);
        MenuTurnOnButton = findViewById(R.id.MenuTurnOnButtonBoo);
        File = findViewById(R.id.File);
        Menu = findViewById(R.id.Menu);
        Settings = findViewById(R.id.Settings);
        Soderz = findViewById(R.id.Soderz);
        OutSettingsButton = findViewById(R.id.OutSettingsButton);
        OutSoderzButton = findViewById(R.id.OutSoderzButton);
        InSettingsButton = findViewById(R.id.InSettingsButton);
        InSoderzButton = findViewById(R.id.InSoderzButton);
        textView = findViewById(R.id.textView);

        RadioGroup radioGroup = findViewById(R.id.radioGroup);
        radioarimo = findViewById(R.id.radioarimo);
        radiomonomakh = findViewById(R.id.radiomonomakh);
        radiooswald = findViewById(R.id.radiooswald);
        radioGroup.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(RadioGroup group, int checkedId) {
                setFont(checkedId);
            }
        });
        openFile();
    }
    private void setFont(int checkedId) {
        Typeface typeface = null;
        if (checkedId == R.id.radioarimo) {
            typeface = ResourcesCompat.getFont(this, R.font.arimo);
        } else if (checkedId == R.id.radiomonomakh) {
            typeface = ResourcesCompat.getFont(this, R.font.monomakh);
        } else if (checkedId == R.id.radiooswald) {
            typeface = ResourcesCompat.getFont(this, R.font.oswald);
        }
        if (typeface != null) {
            textView.setTypeface(typeface);
        }
    }

    public void openFile() {
        firstBook.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                openFileChooser();
            }
        });
    }

    private void openFileChooser() {
        Intent intent = new Intent(Intent.ACTION_OPEN_DOCUMENT);
        intent.addCategory(Intent.CATEGORY_OPENABLE);
        intent.setType("*/*");
        startActivityForResult(intent, REQUEST_CODE_OPEN_DOCUMENT);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        if (requestCode == REQUEST_CODE_OPEN_DOCUMENT && resultCode == RESULT_OK && data != null) {
            Uri uri = data.getData();
            String fileType = getContentResolver().getType(uri);

            if (fileType != null &&
                    (fileType.equals("application/pdf") ||
                            fileType.equals("application/vnd.openxmlformats-officedocument.wordprocessingml.document") ||
                            fileType.equals("text/plain") ||
                            fileType.equals("application/epub+zip") ||
                            fileType.equals("application/x-fictionbook+xml"))) {
                Toast.makeText(this, "Файл успешно выбран: " + uri.toString(), Toast.LENGTH_SHORT).show();
                // Обработка файла
            } else {
                Toast.makeText(this, "Неподдерживаемый тип файла", Toast.LENGTH_SHORT).show();
            }
        }
    }

    public void MenuTurnOff(View view) {
        File.setEnabled(true);
        Menu.setVisibility(View.INVISIBLE);
        File.setVisibility(View.VISIBLE);
    }

    public void MenuTurnOn(View view) {
        File.setEnabled(false);
        Menu.setVisibility(View.VISIBLE);
        // Анимация
        ObjectAnimator translationAnimator = ObjectAnimator.ofFloat(Menu, "y", Menu.getY() - 10, Menu.getY());
        translationAnimator.setDuration(1000);
        ObjectAnimator alphaAnimator = ObjectAnimator.ofFloat(Menu, "alpha", 0f, 1f);
        alphaAnimator.setDuration(1000);
        AnimatorSet animatorSet = new AnimatorSet();
        animatorSet.playTogether(translationAnimator, alphaAnimator);
        animatorSet.start();
    }

    public void InSettings(View view) {
        Menu.setVisibility(View.INVISIBLE);
        File.setVisibility(View.INVISIBLE);
        Settings.setVisibility(View.VISIBLE);
    }

    public void OutSettings(View view) {
        Settings.setVisibility(View.INVISIBLE);
        Menu.setVisibility(View.VISIBLE);
    }

    public void InSoderz(View view) {
        Menu.setVisibility(View.INVISIBLE);
        File.setVisibility(View.INVISIBLE);
        Soderz.setVisibility(View.VISIBLE);
    }

    public void OutSoderz(View view) {
        Soderz.setVisibility(View.INVISIBLE);
        Menu.setVisibility(View.VISIBLE);
    }





    /*public void onCheckedChanged(RadioGroup group, int checkedId) {
        switch (checkedId) {
            case radioarimo: // Используем ID
                textView.setTypeface(ResourcesCompat.getFont(MainActivity1.this, R.font.arimo));
                break;
            case radiomonomakh: // Используем ID
                textView.setTypeface(ResourcesCompat.getFont(MainActivity1.this, R.font.monomakh));
                break;
            case radiooswald: // Используем ID
                textView.setTypeface(ResourcesCompat.getFont(MainActivity1.this, R.font.oswald));
                break;
        }
    }*/
}